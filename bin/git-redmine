#!/bin/bash

MODULE="$0-$1"

if [ -x "$MODULE" ]
then
    shift
    exec $MODULE $*
else
    GROUP=$(basename "$0" | /usr/bin/perl -pe 's/\-/ /g; s/^git redmine (.*)/\U$1/; s/^git redmine/MAIN/; s/SELF/SELF-UPGRADE/')

    echo ""
    echo "[$GROUP]"
    if [ -z "$HELP" ]
    then
        if [ -n "$1" ]
        then
            echo "The file $MODULE is not present. Check your command"
            echo ""
        fi
        for MODULE in $0-*
        do
            HELP=1 $MODULE
        done
        echo ""

        cat <<__EOF__
[OPTIONS]
    * -f => force         : don't ask question to start / finish / clear
    * -r => rebase        : before starting the review, rebase on origin devel
    * -c => chain         : chain review when finish a task, or finish the release after a start
    * -a => auto reassign : reassign automatically the task
    
__EOF__
    fi
    exit 1
fi
