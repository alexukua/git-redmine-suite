#!/bin/bash

source /usr/local/share/Git-Redmine-Suite/helpers/current_git_command
function help {
    echo "$CURRENT_GIT_COMMAND TASK_NUMBER"
    exit 1
}

if [ "x$HELP" != "x" ]
then
    help
fi

set -e

source /usr/local/share/Git-Redmine-Suite/helpers/redmine-checkconf
source /usr/local/share/Git-Redmine-Suite/helpers/redmine-statuses
source /usr/local/share/Git-Redmine-Suite/helpers/redmine-tasks

TASK="$1"

if [ "x$TASK" == "x" ]
then
    help
fi

echo "Try to take control of the task $TASK ..."
redmine_set_status $TASK "$REDMINE_REVIEW_TODO" $REDMINE_USER_ID
redmine_check_task $TASK "$REDMINE_REVIEW_TODO" '
Failed to take control of the task. Please ask to the owner to assign this task to you !
' && echo "Succeed !

Take care, that doesn't mean you have start the task !
"
