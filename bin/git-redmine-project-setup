#!/bin/bash

if [ "x$HELP" != "x" ]
then
    echo "git redmine project add PROJECT TASK_FINISHED_USER_ID REVIEW_FINISHED_USER_ID RELEASE_FINISHED_USER_ID"
    exit 1
fi

set -e

source /usr/local/share/Git-Redmine-Suite/helpers/redmine-checkconf
source /usr/local/share/Git-Redmine-Suite/helpers/redmine-project

PROJECT=$1
if [ "x$PROJECT" == "x" ]
then
    echo "You have to give a project slug : "
    echo ""
    redmine_projects_slug
    exit 1
fi

TASK=$2
REVIEW=$3
RELEASE=$4

if [ "x$TASK" == "x" ] || [ "x$REVIEW" == "x" ]
then
    redmine_get_project_users "$PROJECT"
    exit 1
fi

git config redmine.project.$PROJECT.finish.user.id.task $TASK
git config redmine.project.$PROJECT.finish.user.id.review $REVIEW
git config redmine.project.$PROJECT.finish.user.id.release $RELEASE

