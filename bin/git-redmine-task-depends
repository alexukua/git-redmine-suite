#!/bin/bash

source /usr/local/share/Git-Redmine-Suite/helpers/current_git_command
function help {
    echo "$CURRENT_GIT_COMMAND TASK_DEP_1 TASK_DEP_2 ..."
    exit 1
}

if [ "x$HELP" != "x" ]
then
    help
fi

set -e

source /usr/local/share/Git-Redmine-Suite/helpers/redmine-checkconf
source /usr/local/share/Git-Redmine-Suite/helpers/redmine-question

set +e

TASK=$(git config redmine.task.current)

if [ "x$TASK" == "x" ]
then
    echo "You have not start any task !"
    exit 1
fi

set -e

DEPS="$@"

if [ "x$DEPS" == "x" ]
then
    help
fi

echo "Set deps for task $TASK to $DEPS"
are_you_sure
git config redmine.task.${TASK}.depends "$DEPS"
